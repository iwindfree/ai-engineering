# CloudStore 보안 가이드

## 개요

CloudStore는 사용자 데이터의 보안을 최우선으로 합니다. 이 가이드는 계정과 파일을 안전하게 보호하는 방법을 안내합니다.

## 계정 보안

### 강력한 비밀번호 사용

좋은 비밀번호의 조건:

- ✅ 최소 12자 이상
- ✅ 대문자, 소문자, 숫자, 특수문자 조합
- ✅ 개인 정보와 무관한 내용
- ✅ 다른 서비스와 다른 비밀번호

❌ 피해야 할 비밀번호:

- 생일, 전화번호, 이름
- "password", "123456" 같은 일반적인 비밀번호
- 이전에 유출된 적이 있는 비밀번호

### 2단계 인증 (2FA) 설정

2단계 인증을 활성화하면 계정 보안이 크게 향상됩니다.

**설정 방법:**

1. 설정 > 보안으로 이동합니다
2. "2단계 인증 활성화" 버튼을 클릭합니다
3. 인증 앱을 선택합니다:
   - Google Authenticator
   - Microsoft Authenticator
   - Authy
4. QR 코드를 스캔합니다
5. 생성된 6자리 코드를 입력합니다
6. 복구 코드를 안전한 곳에 저장합니다

### 복구 코드 관리

복구 코드는 2FA 기기를 분실했을 때 계정에 접근하는 유일한 방법입니다.

**중요:**
- 복구 코드를 안전한 곳에 보관하세요
- 복구 코드를 여러 장소에 백업하세요
- 복구 코드를 타인과 공유하지 마세요

## 데이터 암호화

### 전송 중 암호화

CloudStore는 모든 데이터 전송에 TLS 1.3을 사용합니다.

- 웹 브라우저: HTTPS
- API: HTTPS
- 데스크톱/모바일 앱: 암호화된 연결

### 저장 데이터 암호화

**기본 암호화 (모든 플랜):**
- AES-256 암호화
- CloudStore가 키를 관리
- 추가 설정 불필요

**클라이언트 측 암호화 (Enterprise):**
- 파일 업로드 전 암호화
- 사용자만 암호화 키를 보유
- CloudStore도 파일 내용을 볼 수 없음

**클라이언트 측 암호화 활성화:**

1. 설정 > 고급 보안으로 이동합니다
2. "클라이언트 측 암호화" 활성화합니다
3. 마스터 비밀번호를 설정합니다
4. 복구 키를 안전하게 저장합니다

⚠️ **주의**: 마스터 비밀번호를 분실하면 파일을 복구할 수 없습니다.

## 접근 제어

### 세션 관리

**활성 세션 확인:**

1. 설정 > 보안 > 활성 세션으로 이동합니다
2. 현재 로그인된 기기 목록을 확인합니다
3. 인식되지 않는 기기는 즉시 로그아웃시킵니다

**자동 로그아웃 설정:**

- 비활동 시간 후 자동 로그아웃
- 기본값: 30분
- 조정 가능: 5분 ~ 24시간

### IP 화이트리스트 (Enterprise)

특정 IP 주소에서만 접근을 허용할 수 있습니다.

1. 설정 > 보안 > IP 화이트리스트로 이동합니다
2. "IP 화이트리스트 활성화" 체크합니다
3. 허용할 IP 주소 또는 범위를 추가합니다

예시:
```
192.168.1.0/24
203.0.113.5
```

## 파일 공유 보안

### 안전한 공유 링크 생성

**권장 설정:**

- ✅ 비밀번호 보호 활성화
- ✅ 만료일 설정 (최대 7일)
- ✅ 다운로드 제한 설정
- ✅ 링크 활동 모니터링

**공유 링크 예시:**

```
기본 링크:
https://cloudstore.com/s/abc123

보안 강화 링크:
https://cloudstore.com/s/abc123
+ 비밀번호: ****
+ 만료일: 2024-01-23
+ 다운로드 제한: 5회
```

### 공유 권한 관리

파일 또는 폴더를 공유할 때 적절한 권한을 설정하세요.

- **뷰어**: 보기 및 다운로드만 가능
- **댓글 작성자**: 보기 + 댓글 추가 가능
- **편집자**: 보기 + 수정 가능
- **관리자**: 모든 권한 + 공유 관리

## API 보안

### API 키 관리

**모범 사례:**

1. **최소 권한 원칙**
   - 필요한 권한만 부여
   - 읽기 전용 작업에는 읽기 권한만

2. **키 순환**
   - 정기적으로 API 키 교체 (90일 권장)
   - 이전 키는 즉시 삭제

3. **안전한 저장**
   - 환경 변수 사용
   - 시크릿 관리 서비스 활용 (AWS Secrets Manager, HashiCorp Vault)
   - 코드에 직접 포함하지 않기

4. **유출 시 대응**
   - 즉시 키 삭제
   - 새 키 생성
   - 접근 로그 확인

### Webhook 보안

Webhook을 사용할 때 반드시 서명을 검증하세요.

**Python 예시:**

```python
import hmac
import hashlib
from flask import request, abort

def verify_webhook(request):
    signature = request.headers.get('X-CloudStore-Signature')
    secret = os.environ['WEBHOOK_SECRET']

    expected_signature = hmac.new(
        secret.encode('utf-8'),
        request.data,
        hashlib.sha256
    ).hexdigest()

    if not hmac.compare_digest(expected_signature, signature):
        abort(401)
```

## 감사 로그 (Pro 이상)

모든 중요한 활동이 기록됩니다.

**로그 확인:**

1. 설정 > 감사 로그로 이동합니다
2. 날짜 범위와 활동 유형을 선택합니다
3. 로그를 검토하거나 내보냅니다

**기록되는 활동:**

- 로그인/로그아웃
- 파일 업로드/삭제
- 공유 링크 생성
- 설정 변경
- API 키 생성/삭제
- 팀 멤버 추가/제거

## 규정 준수

### GDPR 준수

CloudStore는 GDPR을 준수합니다.

**사용자 권리:**

- **접근권**: 자신의 데이터 확인
- **수정권**: 데이터 수정
- **삭제권**: 데이터 완전 삭제 요청
- **이동권**: 데이터 내보내기

**데이터 삭제 요청:**

1. 설정 > 개인정보로 이동합니다
2. "데이터 삭제 요청" 버튼을 클릭합니다
3. 30일 이내에 모든 데이터가 영구 삭제됩니다

### SOC 2 인증 (Enterprise)

CloudStore Enterprise는 SOC 2 Type II 인증을 받았습니다.

**보고서 요청:**

enterprise-support@cloudstore.com으로 문의하세요.

## 보안 사고 대응

### 계정 침해 의심 시

즉시 다음 조치를 취하세요:

1. ✅ 비밀번호 변경
2. ✅ 모든 기기에서 로그아웃
3. ✅ 2FA 재설정
4. ✅ API 키 모두 삭제
5. ✅ 감사 로그 확인
6. ✅ support@cloudstore.com에 신고

### 파일 유출 대응

1. 해당 파일의 모든 공유 링크 삭제
2. 파일 접근 권한 확인 및 수정
3. 감사 로그에서 접근 이력 확인
4. 필요시 파일 삭제 또는 교체

## 보안 체크리스트

일일 체크리스트:
- [ ] 의심스러운 활동 알림 확인
- [ ] 인식되지 않는 공유 링크 확인

주간 체크리스트:
- [ ] 활성 세션 검토
- [ ] 공유 링크 만료일 확인
- [ ] 팀 멤버 권한 검토

월간 체크리스트:
- [ ] 감사 로그 검토
- [ ] API 키 순환
- [ ] 비밀번호 변경 고려
- [ ] 백업 확인

## 추가 리소스

- [보안 백서](https://cloudstore.com/security-whitepaper)
- [규정 준수 문서](https://cloudstore.com/compliance)
- [보안 뉴스](https://blog.cloudstore.com/security)
- [취약점 보고 프로그램](https://cloudstore.com/bug-bounty)

## 문의

보안 문제 발견 시:
- 이메일: security@cloudstore.com
- 암호화 통신: PGP 키 사용 ([공개키 다운로드](https://cloudstore.com/pgp))
